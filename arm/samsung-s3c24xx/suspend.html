<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>S3C24XX Suspend Support &mdash; The Linux Kernel  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_rtd_colors.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="S3C24XX USB Host support" href="usb-host.html" />
    <link rel="prev" title="S3C24XX CPUfreq support" href="cpufreq.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          </a>
              <div class="version">
                6.1.0-rc6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">A guide to the Kernel Development Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches: the essential guide to getting your code into the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../subsystem-apis.html">Kernel subsystem documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking in the kernel</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Linux kernel licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Kernel Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">The kernel build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">User-space tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../arch.html">CPU Architectures</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../arc/index.html">ARC architecture</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">ARM Architecture</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../arm.html">ARM Linux 2.6 and upper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../booting.html">Booting ARM Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cluster-pm-race-avoidance.html">Cluster-wide Power-up/power-down race avoidance algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../firmware.html">Interface for registering and calling firmware-specific operations for ARM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interrupts.html">Interrupts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kernel_mode_neon.html">Kernel mode NEON</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kernel_user_helpers.html">Kernel-provided User Helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../memory.html">Kernel Memory Layout on ARM Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mem_alignment.html">Memory alignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tcm.html">ARM TCM (Tightly-Coupled Memory) handling in Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup.html">Kernel initialisation parameters on ARM Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../swp_emulation.html">Software emulation of deprecated SWP instruction (CONFIG_SWP_EMULATE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uefi.html">The Unified Extensible Firmware Interface (UEFI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vlocks.html">vlocks for Bare-Metal Mutual Exclusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../porting.html">Porting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features.html">Feature status on arm architecture</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#soc-specific-documents">SoC-specific documents</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../google/chromebook-boot-flow.html">Chromebook Boot Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ixp4xx.html">Release Notes for Linux on Intel’s IXP4xx Network Processor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../marvell.html">ARM Marvell SoCs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../microchip.html">ARM Microchip SoCs (aka AT91)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../netwinder.html">NetWinder specific documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../nwfpe/index.html">NetWinder’s floating point emulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../keystone/overview.html">TI Keystone Linux Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../keystone/knav-qmss.html">Texas Instruments Keystone Navigator Queue Management SubSystem driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../omap/index.html">TI OMAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pxa/mfp.html">MFP Configuration for PXA2xx/PXA3xx Processors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sa1100/index.html">Intel StrongARM 1100</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stm32/stm32f746-overview.html">STM32F746 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stm32/overview.html">STM32 ARM Linux Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stm32/stm32h743-overview.html">STM32H743 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stm32/stm32h750-overview.html">STM32H750 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stm32/stm32f769-overview.html">STM32F769 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stm32/stm32f429-overview.html">STM32F429 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stm32/stm32mp13-overview.html">STM32MP13 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stm32/stm32mp157-overview.html">STM32MP157 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../stm32/stm32-dma-mdma-chaining.html">STM32 DMA-MDMA chaining</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sunxi.html">ARM Allwinner SoCs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../samsung/index.html">Samsung SoC</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Samsung S3C24XX SoC Family</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sunxi/clocks.html">Frequently asked questions about the sunxi clock system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../spear/overview.html">SPEAr ARM Linux Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sti/stih416-overview.html">STiH416 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sti/stih407-overview.html">STiH407 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sti/stih418-overview.html">STiH418 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sti/overview.html">STi ARM Linux Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sti/stih415-overview.html">STiH415 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../vfp/release-notes.html">Release notes for Linux Kernel VFP support code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../loongarch/index.html">LoongArch Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nios2/index.html">Nios II Specific Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../arch.html">CPU Architectures</a> &raquo;</li>
          <li><a href="../index.html">ARM Architecture</a> &raquo;</li>
          <li><a href="index.html">Samsung S3C24XX SoC Family</a> &raquo;</li>
      <li>S3C24XX Suspend Support</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/arm/samsung-s3c24xx/suspend.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="s3c24xx-suspend-support">
<h1>S3C24XX Suspend Support<a class="headerlink" href="#s3c24xx-suspend-support" title="Permalink to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>The S3C24XX supports a low-power suspend mode, where the SDRAM is kept
in Self-Refresh mode, and all but the essential peripheral blocks are
powered down. For more information on how this works, please look
at the relevant CPU datasheet from Samsung.</p>
</div></blockquote>
</section>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>A bootloader that can support the necessary resume operation</p></li>
<li><p>Support for at least 1 source for resume</p></li>
<li><p>CONFIG_PM enabled in the kernel</p></li>
<li><p>Any peripherals that are going to be powered down at the same
time require suspend/resume support.</p></li>
</ol>
</div></blockquote>
</section>
<section id="resuming">
<h2>Resuming<a class="headerlink" href="#resuming" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>The S3C2410 user manual defines the process of sending the CPU to
sleep and how it resumes. The default behaviour of the Linux code
is to set the GSTATUS3 register to the physical address of the
code to resume Linux operation.</p>
<p>GSTATUS4 is currently left alone by the sleep code, and is free to
use for any other purposes (for example, the EB2410ITX uses this to
save memory configuration in).</p>
</div></blockquote>
</section>
<section id="machine-support">
<h2>Machine Support<a class="headerlink" href="#machine-support" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>The machine specific functions must call the s3c_pm_init() function
to say that its bootloader is capable of resuming. This can be as
simple as adding the following to the machine’s definition:</p>
<p>INITMACHINE(s3c_pm_init)</p>
<p>A board can do its own setup before calling s3c_pm_init, if it
needs to setup anything else for power management support.</p>
<p>There is currently no support for over-riding the default method of
saving the resume address, if your board requires it, then contact
the maintainer and discuss what is required.</p>
<p>Note, the original method of adding an late_initcall() is wrong,
and will end up initialising all compiled machines’ pm init!</p>
<p>The following is an example of code used for testing wakeup from
an falling edge on IRQ_EINT0:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static irqreturn_t button_irq(int irq, void *pw)
{
    return IRQ_HANDLED;
}

statuc void __init machine_init(void)
{
    ...

    request_irq(IRQ_EINT0, button_irq, IRQF_TRIGGER_FALLING,
               &quot;button-irq-eint0&quot;, NULL);

    enable_irq_wake(IRQ_EINT0);

    s3c_pm_init();
}
</pre></div>
</div>
</div></blockquote>
</section>
<section id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>There are several important things to remember when using PM suspend:</p>
<ol class="arabic">
<li><p>The uart drivers will disable the clocks to the UART blocks when
suspending, which means that use of printascii() or similar direct
access to the UARTs will cause the debug to stop.</p></li>
<li><p>While the pm code itself will attempt to re-enable the UART clocks,
care should be taken that any external clock sources that the UARTs
rely on are still enabled at that point.</p></li>
<li><p>If any debugging is placed in the resume path, then it must have the
relevant clocks and peripherals setup before use (ie, bootloader).</p>
<p>For example, if you transmit a character from the UART, the baud
rate and uart controls must be setup beforehand.</p>
</li>
</ol>
</div></blockquote>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>The S3C2410 specific configuration in <cite>System Type</cite> defines various
aspects of how the S3C2410 suspend and resume support is configured</p>
<p><cite>S3C2410 PM Suspend debug</cite></p>
<blockquote>
<div><p>This option prints messages to the serial console before and after
the actual suspend, giving detailed information on what is
happening</p>
</div></blockquote>
<p><cite>S3C2410 PM Suspend Memory CRC</cite></p>
<blockquote>
<div><p>Allows the entire memory to be checksummed before and after the
suspend to see if there has been any corruption of the contents.</p>
<p>Note, the time to calculate the CRC is dependent on the CPU speed
and the size of memory. For an 64Mbyte RAM area on an 200MHz
S3C2410, this can take approximately 4 seconds to complete.</p>
<p>This support requires the CRC32 function to be enabled.</p>
</div></blockquote>
<p><cite>S3C2410 PM Suspend CRC Chunksize (KiB)</cite></p>
<blockquote>
<div><p>Defines the size of memory each CRC chunk covers. A smaller value
will mean that the CRC data block will take more memory, but will
identify any faults with better precision</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="document-author">
<h2>Document Author<a class="headerlink" href="#document-author" title="Permalink to this heading">¶</a></h2>
<p>Ben Dooks, Copyright 2004 Simtec Electronics</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cpufreq.html" class="btn btn-neutral float-left" title="S3C24XX CPUfreq support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="usb-host.html" class="btn btn-neutral float-right" title="S3C24XX USB Host support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright The kernel development community.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>